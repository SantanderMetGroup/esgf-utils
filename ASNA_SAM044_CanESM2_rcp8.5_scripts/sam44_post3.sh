#!/bin/bash
#SBATCH --job-name=SAM44_p3
#SBATCH --output=SAM44_p3_%j.out
#SBATCH --error=SAM44_p3_%j.error
#SBATCH --ntasks=1
#SBATCH --time=72:00:00


set -e
export PATH="/home/uc15/uc15004/miniconda3/bin:$PATH"
source activate wrfncxnj_py2.7
module load netcdf_tools

echo "I'm running in ${HOSTNAME}, and today is $(date)"
BASEDIR="/home/uc15/uc15004/projects/EXPERIMENTS/josipa/SAM044_CanESM2_rcp8.5/CanESM2_rcp85"
SCRIPTDIR="${BASEDIR}/scripts"
POSTDIR="${BASEDIR}/post_data/post_fullres"
POST2DIR="${BASEDIR}/post_data/post_CORDEX"
TMPDIR="${SCRIPTDIR}/tmpdir"

expdir=${BASEDIR}
dir_scripts=${SCRIPTDIR}
in_path=${POSTDIR}
out_path=${POST2DIR}
export SWPP_TEMPORARY_STORAGE=$TMPDIR

cd ${dir_scripts}
export SWPP_TEMPORARY_STORAGE=$TMPDIR
export SWPP_WRFNCXNJ_TABLE=/gpfs/res_projects/uc15/apps/wrfncxnj/wrfncxnj/wrfncxnj.table
export SWPP_NETCDF_ATTRIBUTES=${dir_scripts}/attributes.cdl

######################################################################################################
# Josipa changed 11.12.2019 - file names
bname="SAM-44_CCCma-CanESM2_rcp85_r1i1p1_UCAN-WRF341I_v2"
######################################################################################################

function modify_them() {
  while read bname expdir; do
    test ${bname:0:1} = "#" && continue
    export SWPP_WRFNCXNJ_GATTR=${SCRIPTDIR}/wrfnc_extract_and_join.gattr_CORWES
   ./swpp_shifttime_new -i ${out_path}/aclwdnt_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v ACLWDNT -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/alb_${bname}_day_'????????-????????'.nc -l 0.5 -r 0.5 -v ALBEDO -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/tasmaxts_${bname}_day_'????????-????????'.nc -l 0.5 -r 0.5 -v T2MAXTS -c 'time: maximum'
   ./swpp_shifttime_new -i ${out_path}/tasmints_${bname}_day_'????????-????????'.nc -l 0.5 -r 0.5 -v T2MINTS -c 'time: minimum'
   ./swpp_shifttime_new -i ${out_path}/tas_${bname}_day_'????????-????????'.nc -l 0.5 -r 0.5 -v T2 -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/tasmax_${bname}_day_'????????-????????'.nc -l 0.5 -r 0.5 -v T2 -c 'time: maximum'
   ./swpp_shifttime_new -i ${out_path}/tasmin_${bname}_day_'????????-????????'.nc -l 0.5 -r 0.5 -v T2 -c 'time: minimum'
   ./swpp_shifttime_new -i ${out_path}/tsmax_${bname}_day_'????????-????????'.nc -l 0.5 -r 0.5 -v TSK -c 'time: maximum'
   ./swpp_shifttime_new -i ${out_path}/tsmin_${bname}_day_'????????-????????'.nc -l 0.5 -r 0.5 -v TSK -c 'time: minimum'
   ./swpp_shifttime_new -i ${out_path}/ps_${bname}_day_'????????-????????'.nc -l 0.5 -r 0.5 -v PSFC -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/psl_${bname}_day_'????????-????????'.nc -l 0.5 -r 0.5 -v MSLP -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/huss_${bname}_day_'????????-????????'.nc -l 0.5 -r 0.5 -v Q2 -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/sfcWind_${bname}_day_'????????-????????'.nc -l 0.5 -r 0.5 -v SPDUV10 -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/rsus_${bname}_day_'????????-????????'.nc -l 0.5 -r 0.5 -v ACSWUPB -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/rsut_${bname}_day_'????????-????????'.nc -l 0.5 -r 0.5 -v ACSWUPT -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/rlus_${bname}_day_'????????-????????'.nc -l 0.5 -r 0.5 -v ACLWUPB -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/pr_${bname}_day_'????????-????????'.nc -l 0.5 -r 0.5 -v RAINF -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/rlut_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v ACLWUPT -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/sfcWindmax_${bname}_day_'????????-????????'.nc -l 0.5 -r 0.5 -v SPDUV10 -c 'time: maximum'
   ./swpp_shifttime_new -i ${out_path}/clt_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v CLT -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/rsds_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v SWDOWN -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/rlds_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v GLW -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/hfss_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v HFX -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/hfls_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v LH -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/prw_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v VIM -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/clivi_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v VIQI -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/hurs_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v RH2 -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/prls_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v RAINNC -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/hufs_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v QFX -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/ustar_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v UST -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/sst_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v SST -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/evspsbl_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v SFCEVP -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/evspsblpot_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v POTEVP -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/mrros_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v SFROFF -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/snw_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v ACSNOW -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/snm_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v ACSNOM -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/prc_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v RAINC -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/rsdt_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v ACSWDNT -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/uas_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v U10ER -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/vas_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v V10ER -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/ts_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v SKINTEMP -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/zmla_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v PBLH -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/snd_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v SNOWH -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/mrso_${bname}_day_'????????-????????'.nc -l 0.5 -r 0.5 -v MRSO -c 'soil_layers: sum'
   ./swpp_shifttime_new -i ${out_path}/mrro_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v MRRO -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/clwvi_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v VIQC -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/cll_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v CLL -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/clm_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v CLM -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/clh_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v CLH -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/snownc_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v SNOWNC -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/sic_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v XICEM -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/mross_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v UDROFF -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/clice850_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v QICE -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/clice500_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v QICE -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/clice200_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v QICE -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/clfr850_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v CLDFRA -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/clfr500_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v CLDFRA -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/clfr200_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v CLDFRA -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/clwmr850_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v QCLOUD -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/clwmr500_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v QCLOUD -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/clwmr200_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v QCLOUD -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/slw005_${bname}_day_'????????-????????'.nc -l 0.5 -r 0.5 -v SH2O -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/slw025_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v SH2O -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/slw15_${bname}_day_'????????-????????'.nc -l 0.5 -r 0.5 -v SH2O -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/slw07_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v SH2O -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/tsos005_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v TSLB -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/tsos025_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v TSLB -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/tsos15_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v TSLB -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/tsos07_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v TSLB -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/mrsos025_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v SMOIS -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/mrsos005_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v SMOIS -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/mrsos15_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v SMOIS -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/mrsos07_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v SMOIS -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/ua850_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v UER -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/ua500_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v UER -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/ua200_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v UER -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/va850_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v VER -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/va500_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v VER -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/va200_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v VER -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/ta850_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v TEMP -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/ta500_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v TEMP -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/ta200_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v TEMP -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/zg850_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v GHT -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/zg500_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v GHT -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/zg200_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v GHT -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/hus850_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v QVAPOR -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/hus500_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v QVAPOR -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/hus200_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v QVAPOR -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/hur850_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v RH -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/hur500_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v RH -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/hur200_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v RH -c 'time: mean'
<<comm
   ./swpp_shifttime_new -i ${out_path}/aclwdnt_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v ACLWDNT -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/alb_${bname}_day_'????????-????????'.nc -l 0.5 -r 0.5 -v ALBEDO -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/tasmaxts_${bname}_day_'????????-????????'.nc -l 0.5 -r 0.5 -v T2MAXTS -c 'time: maximum'
   ./swpp_shifttime_new -i ${out_path}/tasmints_${bname}_day_'????????-????????'.nc -l 0.5 -r 0.5 -v T2MINTS -c 'time: minimum'
   ./swpp_shifttime_new -i ${out_path}/tas_${bname}_day_'????????-????????'.nc -l 0.5 -r 0.5 -v T2 -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/tasmax_${bname}_day_'????????-????????'.nc -l 0.5 -r 0.5 -v T2 -c 'time: maximum'
   ./swpp_shifttime_new -i ${out_path}/tasmin_${bname}_day_'????????-????????'.nc -l 0.5 -r 0.5 -v T2 -c 'time: minimum'
   ./swpp_shifttime_new -i ${out_path}/tsmax_${bname}_day_'????????-????????'.nc -l 0.5 -r 0.5 -v TSK -c 'time: maximum'
   ./swpp_shifttime_new -i ${out_path}/tsmin_${bname}_day_'????????-????????'.nc -l 0.5 -r 0.5 -v TSK -c 'time: minimum'
   ./swpp_shifttime_new -i ${out_path}/ps_${bname}_day_'????????-????????'.nc -l 0.5 -r 0.5 -v PSFC -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/psl_${bname}_day_'????????-????????'.nc -l 0.5 -r 0.5 -v MSLP -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/huss_${bname}_day_'????????-????????'.nc -l 0.5 -r 0.5 -v Q2 -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/sfcWind_${bname}_day_'????????-????????'.nc -l 0.5 -r 0.5 -v SPDUV10 -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/rsus_${bname}_day_'????????-????????'.nc -l 0.5 -r 0.5 -v ACSWUPB -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/rsut_${bname}_day_'????????-????????'.nc -l 0.5 -r 0.5 -v ACSWUPT -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/rlus_${bname}_day_'????????-????????'.nc -l 0.5 -r 0.5 -v ACLWUPB -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/pr_${bname}_day_'????????-????????'.nc -l 0.5 -r 0.5 -v RAINF -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/rlut_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v ACLWUPT -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/sfcWindmax_${bname}_day_'????????-????????'.nc -l 0.5 -r 0.5 -v SPDUV10 -c 'time: maximum'
   ./swpp_shifttime_new -i ${out_path}/clt_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v CLT -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/rsds_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v SWDOWN -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/rlds_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v GLW -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/hfss_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v HFX -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/hfls_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v LH -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/prw_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v VIM -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/clivi_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v VIQI -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/hurs_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v RH2 -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/prls_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v RAINNC -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/hufs_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v QFX -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/ustar_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v UST -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/sst_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v SST -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/evspsbl_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v SFCEVP -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/evspsblpot_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v POTEVP -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/mrros_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v SFROFF -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/snw_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v ACSNOW -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/snm_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v ACSNOM -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/prc_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v RAINC -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/rsdt_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v ACSWDNT -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/uas_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v U10ER -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/vas_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v V10ER -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/ts_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v SKINTEMP -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/zmla_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v PBLH -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/snd_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v SNOWH -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/mrso_${bname}_day_'????????-????????'.nc -l 0.5 -r 0.5 -v MRSO -c 'soil_layers: sum'
   ./swpp_shifttime_new -i ${out_path}/mrro_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v MRRO -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/clwvi_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v VIQC -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/cll_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v CLL -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/clm_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v CLM -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/clh_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v CLH -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/snownc_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v SNOWNC -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/sic_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v XICEM -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/mross_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v UDROFF -c 'time: mean'
<<comm
   ./swpp_shifttime_new -i ${out_path}/ps_${bname}_day_'????????-????????'.nc -l 0.5 -r 0.5 -v PSFC -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/psl_${bname}_day_'????????-????????'.nc -l 0.5 -r 0.5 -v MSLP -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/huss_${bname}_day_'????????-????????'.nc -l 0.5 -r 0.5 -v Q2 -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/sfcWind_${bname}_day_'????????-????????'.nc -l 0.5 -r 0.5 -v SPDUV10 -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/rsus_${bname}_day_'????????-????????'.nc -l 0.5 -r 0.5 -v ACSWUPB -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/rsut_${bname}_day_'????????-????????'.nc -l 0.5 -r 0.5 -v ACSWUPT -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/rlus_${bname}_day_'????????-????????'.nc -l 0.5 -r 0.5 -v ACLWUPB -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/tasmaxts_${bname}_day_'????????-????????'.nc -l 0.5 -r 0.5 -v T2MAX -c 'time: maximum'
   ./swpp_shifttime_new -i ${out_path}/tasmints_${bname}_day_'????????-????????'.nc -l 0.5 -r 0.5 -v T2MIN -c 'time: minimum'
   ./swpp_shifttime_new -i ${out_path}/pr_${bname}_day_'????????-????????'.nc -l 0.5 -r 0.5 -v RAINF -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/tasmax_${bname}_day_'????????-????????'.nc -l 0.5 -r 0.5 -v T2 -c 'time: maximum'
   ./swpp_shifttime_new -i ${out_path}/tasmin_${bname}_day_'????????-????????'.nc -l 0.5 -r 0.5 -v T2 -c 'time: minimum'
   ./swpp_shifttime_new -i ${out_path}/rlut_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v ACLWUPT -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/sfcWindmax_${bname}_day_'????????-????????'.nc -l 0.5 -r 0.5 -v SPDUV10 -c 'time: maximum'
   ./swpp_shifttime_new -i ${out_path}/clt_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v CLT -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/rsds_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v SWDOWN -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/rlds_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v GLW -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/hfss_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v HFX -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/hfls_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v LH -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/prw_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v VIM -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/clivi_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v VIQI -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/aclwdnt_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v ACLWDNT -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/alb_${bname}_day_'????????-????????'.nc -l 0.5 -r 0.5 -v ALBEDO -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/hurs_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v RH2 -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/prls_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v RAINNC -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/hufs_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v QFX -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/ustar_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v UST -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/sst_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v SST -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/tsmax_${bname}_day_'????????-????????'.nc -l 0.5 -r 0.5 -v TSK -c 'time: maximum'
   ./swpp_shifttime_new -i ${out_path}/tsmin_${bname}_day_'????????-????????'.nc -l 0.5 -r 0.5 -v TSK -c 'time: minimum'
<<comm
   ./swpp_shifttime_new -i ${out_path}/slw005_${bname}_day_'????????-????????'.nc -l 0.5 -r 0.5 -v SH2O -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/slw025_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v SH2O -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/slw15_${bname}_day_'????????-????????'.nc -l 0.5 -r 0.5 -v SH2O -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/slw07_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v SH2O -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/tsos005_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v TSLB -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/tsos025_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v TSLB -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/tsos15_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v TSLB -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/tsos07_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v TSLB -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/mrsos025_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v SMOIS -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/mrsos005_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v SMOIS -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/mrsos15_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v SMOIS -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/mrsos07_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v SMOIS -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/ua850_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v UER -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/ua500_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v UER -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/ua200_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v UER -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/va850_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v VER -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/va500_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v VER -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/va200_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v VER -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/ta850_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v TEMP -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/ta500_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v TEMP -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/ta200_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v TEMP -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/zg850_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v GHT -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/zg500_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v GHT -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/zg200_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v GHT -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/hus850_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v QVAPOR -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/hus500_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v QVAPOR -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/hus200_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v QVAPOR -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/clice850_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v QICE -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/clice500_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v QICE -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/clice200_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v QICE -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/clfr850_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v CLDFRA -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/clfr500_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v CLDFRA -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/clfr200_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v CLDFRA -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/clwmr850_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v QCLOUD -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/clwmr500_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v QCLOUD -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/clwmr200_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v QCLOUD -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/hur850_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v RH -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/hur500_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v RH -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/hur200_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v RH -c 'time: mean'
<<comm
   ./swpp_shifttime_new -i ${out_path}/evspsbl_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v SFCEVP -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/evspsblpot_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v POTEVP -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/mrros_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v SFROFF -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/snw_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v ACSNOW -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/snm_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v ACSNOM -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/prc_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v RAINC -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/rsdt_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v ACSWDNT -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/uas_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v U10ER -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/vas_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v V10ER -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/ts_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v SKINTEMP -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/zmla_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v PBLH -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/snd_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v SNOWH -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/mrso_${bname}_day_'????????-????????'.nc -l 0.5 -r 0.5 -v MRSO -c 'soil_layers: sum'
   ./swpp_shifttime_new -i ${out_path}/mrro_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v MRRO -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/clwvi_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v VIQC -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/cll_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v CLL -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/clm_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v CLM -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/clh_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v CLH -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/snownc_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v SNOWNC -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/sic_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v XICEM -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/mross_${bname}_day_'????????-????????'.nc  -l 0.5 -r 0.5 -v UDROFF -c 'time: mean'
<<comm
   ./swpp_shifttime -i ${out_path}/tas_${bname}_3hr_'????????-????????'.nc             -v T2 -c 'time: point'
   ./swpp_shifttime -i ${out_path}/ps_${bname}_3hr_'????????-????????'.nc             -v PSFC -c 'time: point'
   ./swpp_shifttime -i ${out_path}/huss_${bname}_3hr_'????????-????????'.nc             -v Q2 -c 'time: point'
   ./swpp_shifttime -i ${out_path}/psl_${bname}_3hr_'????????-????????'.nc            -v MSLP -c 'time: point'
   ./swpp_shifttime -i ${out_path}/hfss_${bname}_3hr_'????????-????????'.nc            -v HFX -c 'time: point'
   ./swpp_shifttime -i ${out_path}/hfls_${bname}_3hr_'????????-????????'.nc            -v LH -c 'time: point'
   ./swpp_shifttime -i ${out_path}/rsds_${bname}_3hr_'????????-????????'.nc -l 1.5 -r 1.5 -s 90minute -v SWDOWN -c 'time: mean'
   ./swpp_shifttime -i ${out_path}/pr_${bname}_3hr_'????????-????????'.nc -l 1.5 -r 1.5 -s 90minute -v RAINF -c 'time: mean'
   ./swpp_shifttime -i ${out_path}/prc_${bname}_3hr_'????????-????????'.nc -l 1.5 -r 1.5 -s 90minute -v RAINC -c 'time: mean'
   ./swpp_shifttime -i ${out_path}/rlds_${bname}_3hr_'????????-????????'.nc -l 1.5 -r 1.5 -s 90minute -v GLW -c 'time: mean'
   ./swpp_shifttime -i ${out_path}/hfss_${bname}_3hr_'????????-????????'.nc  -l 1.5 -r 1.5 -s 90minute -v HFX -c 'time: mean'
   ./swpp_shifttime -i ${out_path}/hfls_${bname}_3hr_'????????-????????'.nc  -l 1.5 -r 1.5 -s 90minute -v LH -c 'time: mean'
   ./swpp_shifttime -i ${out_path}/rsus_${bname}_3hr_'????????-????????'.nc -l 1.5 -r 1.5 -s 90minute -v ACSWUPB -c 'time: mean'
   ./swpp_shifttime -i ${out_path}/rlus_${bname}_3hr_'????????-????????'.nc -l 1.5 -r 1.5 -s 90minute -v ACLWUPB -c 'time: mean'
   ./swpp_shifttime -i ${out_path}/clt_${bname}_3hr_'????????-????????'.nc  -l 1.5 -r 1.5 -s 90minute -v CLT -c 'time: mean'
<<comm
   ./swpp_shifttime_new -i ${out_path}/tas_${bname}_mon_'????????-????????'.nc -b 15day        -v T2 -c 'time: mean'
   ./swpp_shifttime_new -i ${out_path}/pr_${bname}_mon_'????????-????????'.nc -b 15day        -v RAINF -c 'time: mean'
comm
  done
}

cat << EOF | modify_them
${bname} ${BASEDIR}
EOF


